<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link type="image/gif" rel="shortcut icon" href="/favicon.gif"/>
<meta name="keywords" content="jQuery-timing,wait,repeat,delay,timed invocation chain,effects queue,tic,fxq" />
<meta name="author" content="CreativeCouple"/>
<title>timing: a jQuery plugin - Avdanced techniques with TIC</title>
<link type="text/css" rel="stylesheet" href="style.css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="jquery-timing.min.js?v=f9677b55e48e1f33941ada5b61a0b4ea2475b042"></script>
<script type="text/javascript" src="documentation.js"></script>

<link type="text/css" rel="stylesheet" href="http://jquery.bassistance.de/treeview/jquery.treeview.css"/>
<script type="text/javascript" src="http://jquery.bassistance.de/treeview/jquery.treeview.js"></script>
</head>
<body>
<div style="float:right">
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<div class="fb-like" data-href="http://creativecouple.github.com/jquery-timing/" data-send="true" data-layout="button_count" data-width="250" data-show-faces="false" data-font="verdana"></div>
<br/>
<div class="g-plusone" data-annotation="inline" data-width="250" data-href="http://creativecouple.github.com/jquery-timing/"></div>
</div>

<h1><a href="./">timing</a> <small>&mdash; a jQuery plugin<br/>
<small><a name="advanced"></a>Advanced techniques with <abbr>tic</abbr></small>
</small></h1>

<div class="left">
<p>
You understood the basic principles and want some action now?<br/>
Here are more one-liners for advanced programmers. 
</p>
<p>
Follow the navigation for documentation, examples, references, and further information.<br/>
&ndash; Have fun!
</p>
</div>

<div class="navigation">
<div class="left">
<h2>Navigation</h2>
<ul class="treeview">
	<li class="closed"><span>Precondition</span>
		<ul>
			<li><span><a href="./#precondition">Simplicity</a></span></li>
			<li><span><a href="./#dependency">Dependencies</a></span></li>
			<li><span><a href="./#inclusion">Include in your page</a></span></li>
			<li><span><a href="./#download">Download &amp; License</a></span></li>
			<li><span><a href="./#todo">Ongoing work</a></span></li>
		</ul>
	</li>
	<li class="closed"><span>Documentation</span>
		<ul>
			<li><span><a href="documentation.html#documentation">Introducing <abbr>tic</abbr>: the Timed Invocation Chain</a></span></li>
			<li><span><a href="documentation.html#comparison">Effects Queue (<abbr>fxq</abbr>) vs. Timed Invocation Chain (<abbr>tic</abbr>)</a></span></li>
			<li><span><a href="documentation.html#combination"><abbr>fxq</abbr> and <abbr>tic</abbr> combined: why friends have to <code>.join()</code></a></span></li>
		</ul>
	</li>
	<li class="closed"><span>Basic Examples</span>
		<ul>
			<li><span><a href="basics.html#basics">Example 1: Blinking by repeated toggling of CSS class</a></span></li>
			<li><span><a href="basics.html#example2">Example 2: Blinking a given number of times</a></span></li>
			<li><span><a href="basics.html#example3">Example 3: Wait a timeout before blinking</a></span></li>
			<li><span><a href="basics.html#example4">Example 4: Clock display with one short blink per second</a></span></li>
			<li><span><a href="basics.html#example5">Example 5: Clock display with double blink per second</a></span></li>
		</ul>
	</li>
	<li class=""><span>Advanced techniques with <abbr>tic</abbr></span>
		<ul>
			<li><span><a href="advanced.html#example6">Example 6: Generating password with fake progress</a></span></li>
			<li><span><a href="advanced.html#example7">Example 7: Removing DOM elements one by one</a></span></li>
			<li><span><a href="advanced.html#example8">Example 8: Invoke callback function on timing</a></span></li>
			<li><span><a href="advanced.html#example9">Example 9: Static usage of wait() &amp; co</a></span></li>
			<li><span><a href="advanced.html#example10">Example 10: the jQueryfied <code>for</code>-loop</a></span></li>
		</ul>
	</li>
	<li class="closed"><span>Ultimate timing control with <abbr>tic</abbr> and <abbr>fxq</abbr></span>
		<ul>
			<li><span><a href="ultimate.html#ultimate">Example 11: repeated fading</a></span></li>
			<li><span><a href="ultimate.html#example12">Example 12: playing pong</a></span></li>
			<li><span><a href="ultimate.html#example13">Example 13: scheduling different elements' animations</a></span></li>
			<li><span><a href="ultimate.html#outlook">Outlook: Something missing here?</a></span></li>
		</ul>
	</li>
	<li class="closed"><span>Method reference</span>
		<ul>
			<li><span><a href="reference.html#reference"><code>.join()</code></a></span></li>
			<li><span><a href="reference.html#.repeat"><code>.repeat()</code></a></span></li>
			<li><span><a href="reference.html#$.repeat"><code>$.repeat()</code></a></span></li>
			<li><span><a href="reference.html#.then"><code>.then()</code></a></span></li>
			<li><span><a href="reference.html#$.then"><code>$.then()</code></a></span></li>
			<li><span><a href="reference.html#.unrepeat"><code>.unrepeat()</code></a></span></li>
			<li><span><a href="reference.html#$.unrepeat"><code>$.unrepeat()</code></a></span></li>
			<li><span><a href="reference.html#.until"><code>.until()</code></a></span></li>
			<li><span><a href="reference.html#.unwait"><code>.unwait()</code></a></span></li>
			<li><span><a href="reference.html#$.unwait"><code>$.unwait()</code></a></span></li>
			<li><span><a href="reference.html#.wait"><code>.wait()</code></a></span></li>
			<li><span><a href="reference.html#$.wait"><code>$.wait()</code></a></span></li>
		</ul>
	</li>
</ul>
<script>
$('.treeview').treeview();
</script>
</div>
<div class="left">
<h2><a name="contact"></a>Contact</h2>
<address>
	<span><span style="color:#800">C   t</span>   <span style="color:#006">C   l</span>   m   e</span>
	<span>  <span style="color:#800">e   v</span>   <span style="color:#006">u</span>   &#64;   .</span>
	<span>   <span style="color:#800">a   e</span>   <span style="color:#006">p</span>   g   n</span>
	<span> <span style="color:#800">r   i</span>   <span style="color:#006">o   e</span>   x   t</span>
</address>
<p><small>Copyright &copy; 2012 &ndash; <a href="http://www.creativecouple.de/">CreativeCouple</a>, Peter Liske</small></p>
</div>
</div>

<div class="content">

<a name="example6"></a>
<div class="block">
<h2>Example 6: Generating password with fake progress</h2>
<pre data-fiddle="http://jsfiddle.net/creativecouple/f7zA5/3/"><small><b>var</b> <i>alphabet</i> = <i>'0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'</i>;
<b>function</b> <i>randomChar</i>() {
	<b>return</b> <i>alphabet</i>[<b>Math</b>.<b>floor</b>(<b>Math</b>.<b>random</b>()*<i>alphabet</i>.<b>length</b>)];
}
</small>
<b>$</b>(<i>'.example6'</i>)&#8203;.<em>unrepeat()</em>&#8203;.<b>val</b>(<i>''</i>)&#8203;.<b>addClass</b>(<i>'load'</i>)&#8203;.<em>repeat(<b>200</b>)</em>&#8203;.<b>val</b>(<i>function(){return $(this).val()+randomChar()}</i>)&#8203;.<em>until(<b>10</b>)</em>&#8203;.<b>removeClass</b>(<i>'load'</i>);
</pre>
<p>
	Of course generating a random password is done in less than a millisecond.
	But you want to simulate heavy computational things going on - just for a nice user experience.<br/> 
	And here it is: <input class="example6" type="password" size="11" value=""/> - <button onclick="$('.example6').unrepeat().val('').addClass('load').repeat(200).val(function(){return $(this).val()+randomChar()}).until(10).removeClass('load')">generate random password</button>.<br/>
</p>
<script type="text/javascript">
var alphabet = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
function randomChar() {
	return alphabet[Math.floor(Math.random()*alphabet.length)];
}
</script>
<p>
	So what happens here?
</p>
<ul>
	<li>First we interrupt any possibly ongoing password generation by using <code>.unrepeat()</code>.</li>
	<li>We clear the current password value and add a nice animated gif in the background with <code>.val('').addClass('load')</code>.</li>
	<li>Now we repeatedly add a new random character, which is done via <code>.repeat(200).val(function(){return $(this).val()+randomChar()})</code>.</li>
	<li>After doing so for 10 times we stop and then remove our CSS class with <code>.until(10).removeClass('load')</code>.</li>
</ul>
<p>
	Try out clicking multiple times on that button. You will see, that the ongoing animation is always stopped before starting over.
</p>
</div>

<a name="example7"></a>
<div class="block">
<h2>Example 7: Removing DOM elements one by one</h2>
<pre><b>$</b>(<i>'.example7'</i>)&#8203;.<em>repeat(<b>3000</b>,<b>true</b>)</em>&#8203;.<em>repeat(<b>300</b>)</em>&#8203;.<b>prepend</b>(<i>'&lt;li&gt;green'</i>)&#8203;.<em>wait(<b>200</b>)</em>&#8203;.<b>append</b>(<i>'&lt;li&gt;bottle'</i>)&#8203;.<em>until(<b>3</b>)</em>&#8203;.<em>repeat(<b>100</b>)</em>&#8203;.<b>find</b>(<i>'li'</i>)&#8203;.<b>not</b>(<i>'.clazz'</i>)&#8203;.<b>first</b>()&#8203;.<b>remove</b>()&#8203;.<em>until()</em>;</pre>

<ul class="example7">
<li class="clazz">Green bottles?</li>
</ul>
<script>$('.example7').repeat(3000,true).repeat(300).prepend('<li>green').wait(200).append('<li>bottle').until(3).repeat(100).find('li').not('.clazz').first().remove().until();</script>

<p>To see what's going on here it might help to write it down in nested manner with comments:</p>
<pre data-fiddle="http://jsfiddle.net/creativecouple/Zn5mL/"><b>$</b>(<i>'.example7'</i>)
  .<em>repeat(<b>3000</b>,<b>true</b>)</em>  // start every 3 seconds over again, first run right now:
  
        .<em>repeat(<b>300</b>)</em>                          // every 300ms do
             .<b>prepend</b>(<i>'&lt;li&gt;green'</i>)            // add new element as first child
             .<em>wait(<b>200</b>)</em>.<b>append</b>(<i>'&lt;li&gt;bottle'</i>)  // after more 200ms add new element as last child
        .<em>until(<b>3</b>)</em>                             // this addition stuff for 3 times
  
        .<em>repeat(<b>100</b>)</em>                    // with interval of 100ms do
             .<b>find</b>(<i>'li'</i>).<b>not</b>(<i>'.clazz'</i>)  // search our added elements
             .<b>first</b>().<b>remove</b>()          // and remove the first one
        .<em>until()</em>;                       // if no such element left then stop this loop

  // the outer loop will continue forever</pre>
<p>Everything clear? Fine :-)</p>
</div>

<a name="example8"></a>
<div class="block">
<h2>Example 8: Invoke callback function on timing</h2>
<pre data-fiddle="http://jsfiddle.net/creativecouple/dpgV6/"><b>$</b>(<i>'.example8'</i>)&#8203;.<em>repeat(<b>100</b>)</em>&#8203;.<b>append</b>(<i>'&lt;li&gt;Test'</i>)&#8203;.<em>until(<b>6</b>)</em>&#8203;.<em>then(<i>function(){alert('Hello :-)');}</i>)</em>&#8203;.<b>children</b>()&#8203;.<b>not</b>(<i>':first'</i>)&#8203;.<b>remove</b>();</pre>
<ul class="example8">
	<li>example</li>
</ul>
<p>
	There is a list above which is filled whith elements on clicking <button onclick="$('.example8').repeat(100).append('<li>Test').until(6).then(function(){alert('Hello :-)');}).children().not(':first').remove()">this button</button>.<br/>
	After having added 6 elements an alert box is shown up as simple callback example.
	After that the elements are removed again.
</p>
</div>

<a name="example9"></a>
<div class="block">
<h2>Example 9: Static usage of wait() &amp; co</h2>
<p>
	You can also use the <code>wait</code>, <code>unwait</code>, <code>repeat</code>, <code>unrepeat</code>, and <code>then</code> methods in a static way.
	There you also optionally can give thread names to access them later for interrupting your timeouts and intervals.
</p>
<pre data-fiddle="http://jsfiddle.net/creativecouple/BBc6m/"><small><b>function</b> <i>first</i>() {
	<b>alert</b>(<i>'first! Click second button to suppress next dialog.'</i>);
}
<b>function</b> <i>second</i>() {
	<b>alert</b>(<i>'second'</i>);
}

...</small>

<b>$</b>&#8203;.<em>wait(<i>'myQueue'</i>,<b>1000</b>,<i>first</i>)</em>&#8203;.<em>wait(<b>1000</b>)</em>&#8203;.<em>then(<i>second</i>)</em>;

<small>...</small>

<b>$</b>&#8203;.<em>unwait(<i>'myQueue'</i>)</em>;</pre>
<script>
function first() {
	alert('first! Click second button to suppress next dialog.');
}
function second() {
	alert('second!');
}
</script>
<p>
If you now click on <button onclick="$.wait('myQueue',1000,first).wait(1000).then(second)">this button</button> then these two methods will be called on the defined schedule.<br/>
If you quickly press the <button onclick="$.unwait('myQueue')">cancel button</button> right in between then you can interrupt the second timer and thus suppress the second dialog.  
</p>
</div>

<a name="example10"></a>
<div class="block">
<h2>Example 10: the jQueryfied <code>for</code>-loop</h2>
<p>
	Again we are generating a random password like in <a href="#example6">example 6</a>.<br/>
	But this time we use the <code>.repeat</code> function without a timer and instead include a <code>.wait</code> within each iteration:
</p>
<pre data-fiddle="http://jsfiddle.net/creativecouple/f7zA5/"><b>$</b>(<i>'.example10'</i>)&#8203;.<em>unwait()</em>&#8203;.<b>val</b>(<i>''</i>)&#8203;.<b>addClass</b>(<i>'load'</i>)&#8203;.<em>repeat()</em>&#8203;.<b>val</b>(<i>function(){return $(this).val()+randomChar()}</i>)&#8203;.<em>wait(<b>200</b>)</em>&#8203;.<em>until(<b>10</b>)</em>&#8203;.<b>removeClass</b>(<i>'load'</i>);</pre>
<p>
	And again here it is: <input class="example10" type="password" size="11" value=""/> - <button onclick="$('.example10').unwait().val('').addClass('load').repeat().val(function(){return $(this).val()+randomChar()}).wait(200).until(10).removeClass('load')">generate random password</button>.<br/>
</p>
<p>
	The variant of <code>.repeat()</code> without interval timer is comparable to a timing-enabled <code>for</code>-loop.
	If you don't have any waits in your loop then it actually loops without any delay between the iterations.
</p>
<p>
	Again try out clicking multiple times on that button to see, that the ongoing animation is always stopped before starting over.
</p>
</div>

</div>
</body>
</html>
