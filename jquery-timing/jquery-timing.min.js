(function(n,i){var m={};function g(p,x,q){var C={b:p},t={},A={},w=C,y=[],v=i.setTimeout(function(){v=undefined;if(w==C){u()}},0),o,r,s,u=function(D){if(D){if(!D.l||w!=D){return}}while(true){r=w.l&&w.hedContext;p=r||w.b;A.length=0;Array.prototype.push.apply(A,p.get());if(w.l){if(!r){return}z()}if(w.f){o=p[w.f];if(o.m){s=!r&&o.m(u,w,y);if(s===true){z()}else{w=s||w}}else{p=o.apply(p,w.e);z()}}else{if(!y[0]){return p}if(v){return}w=a.m(u,false,y)}}},B;function z(){w.l=w.hedContext=undefined;if(typeof w.a=="function"){d(y,w.b,w.a)}w=w.g;w.b=p}for(B in p){if(typeof p[B]=="function"){(function(D){A[D]=function(){t=t.g={g:C,b:C.b,f:D,e:arguments};return w==C&&(w=t)&&u()||A}})(B)}}A._=p._=p;return A[x].apply(p,q)}function d(p,o,q){return q.apply(o,n(p).map(function(){return this.c}).get())}function f(){return g(this,"wait",arguments)}f.m=function(q,t){var p,o,r,s;if(typeof t.e[0]=="function"){t.a=t.e[0]}else{p=t.e[0];t.a=t.e[1]}if(typeof p=="string"){o=function(){n(this).unbind("__unwait__",r).unbind(p,o);t.hedContext=t.hedContext&&t.hedContext.add(this)||n(this);q(t)};r=function(){n(this).unbind("__unwait__",r).unbind(p,o);t.hedContext=t.hedContext&&t.hedContext.not(this)};t.b.bind(p,o).bind("__unwait__",r)}else{r=function(){n(this).unbind("__unwait__",r);t.b=t.b.not(this);if(!t.b.length){i.clearTimeout(s)}};s=i.setTimeout(function(){t.b.unbind("__unwait__",r);t.hedContext=t.b;q(t)},Math.max(0,p));t.b.bind("__unwait__",r)}t.l=true};function k(){return this.trigger("__unwait__")}function b(){return g(this,"repeat",arguments)}b.m=function(o,q,p,r){if(typeof q.e[0]=="function"){q.a=q.e[0]}else{if(typeof q.e[1]=="function"){q.h=q.e[0];q.a=q.e[1]}else{q.h=q.e[0];r=q.e[1];q.a=q.e[2]}}if(q.h==undefined){q.k=function(){n(this).unbind("__unrepeat__",q.k);q.b=q.b.not(this);q.h=q.b.length&&q.h};r=true;q.b.bind("__unrepeat__",q.k)}else{if(typeof q.h=="string"){q.m=function(){q.hedContext=q.hedContext&&q.hedContext.add(this)||n(this);o(q)};q.k=function(){n(this).unbind("__unrepeat__",q.k).unbind(q.h,q.m);q.hedContext=q.hedContext&&q.hedContext.not(this)};q.b.bind(q.h,q.m).bind("__unrepeat__",q.k)}else{q.k=function(){n(this).unbind("__unrepeat__",q.k);q.b=q.b.not(this);if(!q.b.length){i.clearInterval(q.h)}};q.h=i.setInterval(function(){q.hedContext=q.b;o(q)},Math.max(0,q.h));q.b.bind("__unrepeat__",q.k)}}if(r){q.hedContext=q.b}q.c=0;q.l=true;p.unshift(q)};function j(o){return this.trigger("__unrepeat__")}function a(){throw".until() method must be used after .repeat() only"}a.m=function(o,q,p){var r=q&&q.e[0];if(r==undefined){r=!q.b.size()}if(typeof r=="function"){r=d(p,q.b,r)}if(typeof r=="object"){r=r.toString()}if(typeof r=="number"){r=p[0].c>=r-1}if(r){q=p.shift();q.b.unbind("__unrepeat__",q.k);if(q.h==undefined){q.h=0}else{if(typeof q.h=="string"){q.b.unbind(q.h,q.m)}else{i.clearInterval(q.h)}}return true}else{q=p[0];q.c++;q.l=true;if(q.h==undefined){q.hedContext=q.b}return q}};function e(o){o.apply(this);return this}e.m=function(o,p){p.a=p.e[0];return true};function c(){return g(this,"join",arguments)}c.m=function(o,q){var p,r=n(q.b);if(typeof q.e[0]=="function"){q.a=q.e[0]}else{p=q.e[0];q.a=q.e[1]}q.b.queue(p==undefined?"fx":p,function(s){if(r.length&&!(r=r.not(this)).length){q.hedContext=q.b;o(q)}s()});q.l=true};function h(o,q,p){if(typeof o=="string"){Array.prototype.shift.apply(p)}else{o=""}return q.apply(m[o]=(m[o]||n("<div>").text(o)),p)}function l(r,u,q){if(typeof r=="string"){q=new Function("x","return ["+r+"\n,x]");r=function(w,v){v=q(w);p.x=v[1];return v[0]}}var o=typeof u=="function",t=typeof r=="function",p=function(v){if(arguments.length==1){p.x=v;if(o){u(v)}}else{return p.$()}};function s(v){v=o?u():p.x;return t?r(v):v}s.toString=s;n.extend(p,{x:0,$:s,toString:s,_:{toString:p.$},mod:function(v){return l(function(w){return w%v},p)},add:function(v){return l(function(w){return w+v},p)},neg:function(){return l("-x",p)},$$:function(v){return l(v,p)}});n.each("abcdefghij",function(v,w){p[v]=p[w]=function(){p(arguments[v])}});return p}i.$$=l;n.fn.extend({wait:f,unwait:k,repeat:b,unrepeat:j,until:a,then:e,join:c,$:n});n.extend({wait:function(o){return h(o,f,arguments)},unwait:function(o){return h(o,k,arguments)},repeat:function(o){return h(o,b,arguments)},unrepeat:function(o){return h(o,j,arguments)},then:function(o){return h(o,e,arguments)},join:function(o){return h(o,c,arguments)},$$:l})})(jQuery,window);